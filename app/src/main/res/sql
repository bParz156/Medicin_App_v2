CREATE TABLE "User" (
  id       integer NOT NULL UNIQUE, 
  login    varchar(255) NOT NULL UNIQUE, 
  password varchar(255) NOT NULL);
CREATE TABLE Patient (
  id      integer GENERATED BY DEFAULT AS IDENTITY (START WITH 1), 
  name    varchar(255) NOT NULL, 
  user_id integer NOT NULL, 
  PRIMARY KEY (id));
CREATE TABLE Medicine (
  id   integer GENERATED BY DEFAULT AS IDENTITY (START WITH 1), 
  name varchar(255) NOT NULL, 
  form varchar(255) NOT NULL, 
  PRIMARY KEY (id));
CREATE TABLE Storage (
  id         integer GENERATED BY DEFAULT AS IDENTITY (START WITH 1), 
  Medicineid integer NOT NULL, 
  quantity   integer NOT NULL, 
  PRIMARY KEY (id));
CREATE TABLE FirstAidKit (
  Patient_id integer NOT NULL, 
  Storage_id integer NOT NULL, 
  PRIMARY KEY (Patient_id, 
  Storage_id));
CREATE TABLE Schedule (
  id          integer GENERATED BY DEFAULT AS IDENTITY (START WITH 1), 
  Patient_id  integer NOT NULL, 
  Medicine_id integer NOT NULL, 
  day         integer NOT NULL, 
  hour        float NOT NULL, 
  dose        integer NOT NULL, 
  startDate   timestamp NOT NULL, 
  endDate     timestamp, 
  Medicineid  integer, 
  PRIMARY KEY (id));
CREATE TABLE Usage (
  id          integer GENERATED BY DEFAULT AS IDENTITY (START WITH 1), 
  Schedule_id integer NOT NULL, 
  confirmed   integer NOT NULL, 
  PRIMARY KEY (id));
CREATE TABLE Notification (
  id      integer GENERATED BY DEFAULT AS IDENTITY (START WITH 1), 
  Usageid integer NOT NULL, 
  title   varchar(255) NOT NULL, 
  info    varchar(255) NOT NULL, 
  seen    integer NOT NULL, 
  PRIMARY KEY (id));
ALTER TABLE Storage ADD CONSTRAINT FKStorage10946 FOREIGN KEY (Medicineid) REFERENCES Medicine (id);
ALTER TABLE FirstAidKit ADD CONSTRAINT FKFirstAidKi313969 FOREIGN KEY (Patient_id) REFERENCES Patient (id);
ALTER TABLE FirstAidKit ADD CONSTRAINT FKFirstAidKi928094 FOREIGN KEY (Storage_id) REFERENCES Storage (id);
ALTER TABLE Schedule ADD CONSTRAINT FKSchedule183576 FOREIGN KEY (Patient_id) REFERENCES Patient (id);
ALTER TABLE Schedule ADD CONSTRAINT FKSchedule667331 FOREIGN KEY (Medicineid) REFERENCES Medicine (id);
ALTER TABLE Usage ADD CONSTRAINT FKUsage665346 FOREIGN KEY (Schedule_id) REFERENCES Schedule (id);
ALTER TABLE Notification ADD CONSTRAINT FKNotificati886480 FOREIGN KEY (Usageid) REFERENCES Usage (id);
ALTER TABLE Patient ADD CONSTRAINT FKPatient752338 FOREIGN KEY (user_id) REFERENCES "User" (id);
